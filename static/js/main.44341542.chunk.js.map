{"version":3,"sources":["assets/bg-start.svg","assets/ic-point.svg","components/Container.js","components/Title.js","pages/StartPage.js","components/SandBox.js","pages/PlayPage.js","pages/EndPage.js","App.js","index.js"],"names":["module","exports","__webpack_require__","p","Container","styled","div","_templateObject","Title","h1","Title_templateObject","Content","StartPage_templateObject","StartPage","_ref","toNextPage","containerStyle","background","concat","bgSrc","backgroundRepeat","backgroundPosition","useEffect","onKeyPress","e","keyCode","window","addEventListener","removeEventListener","react_default","a","createElement","components_Container","style","components_Title","marginTop","Wrapper","SandBox_templateObject","Box","_templateObject3","prop","_css","_templateObject2","colNum","rowNum","BaitBackground","_templateObject4","opacity","BaitImg","img","_templateObject5","SnakeBackground","_templateObject6","SnakeHeadShadow","_templateObject7","SnakeBlock","_templateObject8","getOpacity","d","_ref$dMin","dMin","_ref$dMax","dMax","_ref$oMin","oMin","_ref$oMax","oMax","DIRECTION","TOP","LEFT","RIGHT","BOTTOM","NONE","getRndInteger","min","max","Math","floor","random","makeBait","snake","repeatPoint","bait","x","y","count","findRepeat","find","s","reducer","state","action","produce","draft","type","direction","newX","newY","snakeHead","splice","pop","length","initialSnake","initialBait","SandBox","_ref2","setScore","_useState","useState","_useState2","Object","slicedToArray","canPlay","setCanPlay","boxes","React","useMemo","push","computeBoxes","_useReducer","useReducer","_useReducer2","dispatch","key","setInterval","clearInterval","sHead","idx","setTimeout","onKeyDown","map","_ref3","xDiff","abs","yDiff","sameX","sameY","Fragment","src","baitImgSrc","baitContent","snakeIndex","isSnakeHead","snakeContent","decorationStyle","PlayPage_templateObject","DecorationText1","PlayPage_templateObject2","DecorationText2","PlayPage_templateObject3","DecorationText3","PlayPage_templateObject4","DecorationText4","PlayPage_templateObject5","scoreStyle","PlayPage_templateObject6","ScoreArea","PlayPage_templateObject7","BestArea","PlayPage_templateObject8","PlayPage","score","best","padding","components_SandBox","CenterRow","EndPage_templateObject","EndPage_templateObject2","InverseColorText","EndPage_templateObject3","CheckText","span","EndPage_templateObject4","EndPage","toPrevPage","color","EndPage_ScoreArea","fontSize","margin","PAGE","START_PAGE","PLAY_PAGE","END_PAGE","App","page","setPage","_useState3","_useState4","_useState5","parseInt","localStorage","getItem","_useState6","setBest","toPlayPage","setItem","pages_StartPage","pages_PlayPage","pages_EndPage","ReactDOM","render","src_App","document","getElementById"],"mappings":"4EAAAA,EAAAC,QAAiBC,EAAAC,EAAuB,yDCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,8ZCExC,IAUeC,EAVGC,IAAOC,IAAVC,8YCAf,IAwBeC,EAxBDH,IAAOI,GAAVC,gLC8BX,IAAMC,EAAUN,IAAOF,EAAVS,KAwCEC,EAjCG,SAAAC,GAAoB,IAAjBC,EAAiBD,EAAjBC,WACbC,EAAiB,CACrBC,WAAU,OAAAC,OAASC,IAAT,KACVC,iBAAkB,YAClBC,mBAAoB,SAiBtB,OAdAC,oBAAU,WACR,SAASC,EAAWC,GAEA,KAAdA,EAAEC,SACJV,IAKJ,OADAW,OAAOC,iBAAiB,WAAYJ,GAC7B,WACLG,OAAOE,oBAAoB,WAAYL,KAExC,IAGDM,EAAAC,EAAAC,cAACC,EAAD,CAAWC,MAAOjB,GAChBa,EAAAC,EAAAC,cAACG,EAAD,CAAOD,MAAO,CAAEE,UAAW,MAA3B,cACAN,EAAAC,EAAAC,cAACpB,EAAD,+3DClDN,IAAMyB,EAAU/B,IAAOC,IAAV+B,KAiBPC,EAAMjC,IAAOC,IAAViC,IALQ,SAAAC,GAAI,OAAIC,YAAJC,IACIF,EAAKG,OACNH,EAAKI,UAWvBC,EAAiBxC,IAAOC,IAAVwC,IAQP,SAAAN,GAAI,OAAIA,EAAKO,SAAW,IAI/BC,EAAU3C,IAAO4C,IAAVC,KASPC,EAAkB9C,IAAOC,IAAV8C,KAWfC,EAAkBhD,IAAOC,IAAVgD,KAefC,EAAalD,IAAOC,IAAVkD,IAMA,SAAAhB,GAAI,OAAIA,EAAKvB,YAAc,UAI3C,SAASwC,EAAT3C,GAAmE,IAA7C4C,EAA6C5C,EAA7C4C,EAA6CC,EAAA7C,EAA1C8C,YAA0C,IAAAD,EAAnC,EAAmCA,EAAAE,EAAA/C,EAAhCgD,YAAgC,IAAAD,EAAzB,EAAyBA,EAAAE,EAAAjD,EAAtBkD,YAAsB,IAAAD,EAAf,EAAeA,EAAAE,EAAAnD,EAAZoD,KACrD,OAASR,EAAIE,UADoD,IAAAK,EAAL,EAAKA,GACpCD,IAAUF,EAAOF,GAAQI,EAGxD,IAAMpB,EAAS,GACTD,EAAS,GACTwB,EAAY,CAChBC,IAAK,MACLC,KAAM,MACNC,MAAO,MACPC,OAAQ,MACRC,KAAM,OAgBR,SAASC,EAAcC,EAAKC,GAC1B,OAAOC,KAAKC,MAAMD,KAAKE,UAAYH,EAAMD,IAAQA,EAGnD,SAASK,EAASC,GAChB,IAAIC,EAAcD,EAAM,GACpBE,EAAO,CAAEC,EAAG,EAAGC,EAAG,GAElBC,EAAQ,EAEZ,SAASC,EAAWJ,GAClB,OAAOF,EAAMO,KAAK,SAAAC,GAAC,OAAIA,EAAEL,IAAMD,EAAKC,GAAKK,EAAEJ,IAAMF,EAAKE,IAGxD,KAAOH,IAELA,EAAcK,EADdJ,EAAO,CAAEC,EAAGV,EAAc,EAAG9B,GAASyC,EAAGX,EAAc,EAAG7B,SAG1DyC,GAXe,QAgBjB,OAAOH,EAGT,IAAMO,EAAU,SAACC,EAAOC,GAAR,OACdC,YAAQF,EAAO,SAAAG,GACb,OAAQF,EAAOG,MACb,IAAK,aACH,GAAID,EAAME,YAAc5B,EAAUK,KAAM,OAExC,IACIwB,EAAMC,EADJC,EAAYL,EAAMb,MAAM,GAE1Ba,EAAME,YAAc5B,EAAUG,OAChC0B,EAAOE,EAAUf,EAAI,EACrBc,EAAOC,EAAUd,GACRS,EAAME,YAAc5B,EAAUE,MACvC2B,EAAOE,EAAUf,EAAI,EACrBc,EAAOC,EAAUd,GACRS,EAAME,YAAc5B,EAAUC,KACvC4B,EAAOE,EAAUf,EACjBc,EAAOC,EAAUd,EAAI,GACZS,EAAME,YAAc5B,EAAUI,SACvCyB,EAAOE,EAAUf,EACjBc,EAAOC,EAAUd,EAAI,GAGnBY,GAAQrD,EACVqD,EAAO,EACEA,EAAO,IAChBA,EAAOrD,EAAS,GAEdsD,GAAQrD,EACVqD,EAAO,EACEA,EAAO,IAChBA,EAAOrD,EAAS,GAGlBiD,EAAMb,MAAMmB,OAAO,EAAG,EAAG,CACvBhB,EAAGa,EACHZ,EAAGa,IAEDD,IAASH,EAAMX,KAAKC,GAAKc,IAASJ,EAAMX,KAAKE,EAC/CS,EAAMX,KAAOH,EAASc,EAAMb,OAE5Ba,EAAMb,MAAMoB,MAEd,MACF,IAAK,mBACH,GAAIP,EAAMb,MAAMqB,OAAS,EAAG,CAC1B,GACER,EAAME,YAAc5B,EAAUC,KAC9BuB,EAAOI,YAAc5B,EAAUI,OAE/B,OAEF,GACEsB,EAAME,YAAc5B,EAAUI,QAC9BoB,EAAOI,YAAc5B,EAAUC,IAE/B,OAEF,GACEyB,EAAME,YAAc5B,EAAUE,MAC9BsB,EAAOI,YAAc5B,EAAUG,MAE/B,OAEF,GACEuB,EAAME,YAAc5B,EAAUG,OAC9BqB,EAAOI,YAAc5B,EAAUE,KAE/B,OAGJwB,EAAME,UAAYJ,EAAOI,cAM3BO,EAAe,CAAC,CAAEnB,EAAG,EAAGC,EAAG,IAC3BmB,EAAcxB,EAASuB,GA0KdE,EAxKC,SAAAC,GAA8B,IAA3B1F,EAA2B0F,EAA3B1F,WAAY2F,EAAeD,EAAfC,SAAeC,EACdC,oBAAS,GADKC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GACrCK,EADqCH,EAAA,GAC5BI,EAD4BJ,EAAA,GAEtCK,EAAQC,IAAMC,QAAQ,kBAxHT,SAACxE,EAAQD,GAE5B,IADA,IAAMuE,EAAQ,GACL9B,EAAI,EAAGA,EAAIxC,EAAQwC,IAC1B,IAAK,IAAID,EAAI,EAAGA,EAAIxC,EAAQwC,IAC1B+B,EAAMG,KAAK,CACTlC,IACAC,MAIN,OAAO8B,EA8G2BI,CAAa1E,EAAQD,IAAS,CAC9DC,EACAD,IAJ0C4E,EAOlBC,qBAAW/B,EAAS,CAC5CP,KAAMqB,EACNvB,MAAOsB,EACPP,UAAW5B,EAAUK,OAVqBiD,EAAAX,OAAAC,EAAA,EAAAD,CAAAS,EAAA,GAOrC7B,EAPqC+B,EAAA,GAO9BC,EAP8BD,EAAA,GAYpCvC,EAA2BQ,EAA3BR,KAAMF,EAAqBU,EAArBV,MAAOe,EAAcL,EAAdK,UA2IrB,OAzIAzE,oBAAU,WACR,IAAIqG,EAAM,KAWV,OAVIX,IACFU,EAAS,CACP5B,KAAM,eAER6B,EAAMC,YAAY,WAChBF,EAAS,CACP5B,KAAM,gBAEP,MAEE,WACL+B,cAAcF,KAEf,CAAC5B,EAAWiB,IAEf1F,oBAAU,WACRoF,EAAS1B,EAAMqB,OAAS,IACvB,CAACrB,EAAMqB,SAEV/E,oBAAU,WACR,IAAMwG,EAAQ9C,EAAM,GACEA,EAAMO,KAC1B,SAACC,EAAGuC,GAAJ,OAAYA,EAAM,GAAMvC,EAAEL,IAAM2C,EAAM3C,GAAKK,EAAEJ,IAAM0C,EAAM1C,MAGzD6B,GAAW,GACXe,WAAWjH,EAAY,OAExB,CAACiE,IAEJ1D,oBAAU,WACR,SAAS2G,EAAUzG,GACjB,OAAQA,EAAEC,SACR,KAAK,GACL,KAAK,IACHiG,EAAS,CACP5B,KAAM,mBACNC,UAAW5B,EAAUC,MAEvB,MACF,KAAK,GACL,KAAK,IACHsD,EAAS,CACP5B,KAAM,mBACNC,UAAW5B,EAAUE,OAEvB,MACF,KAAK,GACL,KAAK,GACHqD,EAAS,CACP5B,KAAM,mBACNC,UAAW5B,EAAUI,SAEvB,MACF,KAAK,GACL,KAAK,IACHmD,EAAS,CACP5B,KAAM,mBACNC,UAAW5B,EAAUG,SAO7B,OADA5C,OAAOC,iBAAiB,UAAWsG,GAC5B,WACLvG,OAAOE,oBAAoB,UAAWqG,KAEvC,IAoEDpG,EAAAC,EAAAC,cAACK,EAAD,KACG8E,EAAMgB,IAAI,SAAAC,GAAA,IAAGhD,EAAHgD,EAAGhD,EAAGC,EAAN+C,EAAM/C,EAAN,OACTvD,EAAAC,EAAAC,cAACO,EAAD,CAAKqF,IAAG,GAAAzG,OAAKiE,EAAL,KAAAjE,OAAUkE,GAAKxC,OAAQA,EAAQD,OAAQA,GApErD,SAAqBwC,EAAGC,GACtB,IAEMgD,EAAQxD,KAAKyD,IAAInD,EAAKC,EAAIA,GAC1BmD,EAAQ1D,KAAKyD,IAAInD,EAAKE,EAAIA,GAC1BmD,EAAQpD,IAAMD,EAAKC,EACnBqD,EAAQpD,IAAMF,EAAKE,EAEzB,IAAKmD,GAASC,IAAUJ,GAPP,IAO4BE,GAN5B,EAM+C,CAC9D,IAAIvF,EAAU,GASd,OARKwF,GAAUC,IAMbzF,EAAUU,EAAW,CAAES,KALV,IAKgBF,KAJhB,IAIsBF,KAFtByE,EAZA,EADA,GAe4B3E,KAH5B,EAGkCF,EADrC6E,EAAQD,EAAQF,KAI1BvG,EAAAC,EAAAC,cAAAF,EAAAC,EAAA2G,SAAA,KACE5G,EAAAC,EAAAC,cAACc,EAAD,CAAgBE,QAASA,IACxBoC,IAAMD,EAAKC,GAAKC,IAAMF,EAAKE,GAAKvD,EAAAC,EAAAC,cAACiB,EAAD,CAAS0F,IAAKC,OAKrD,OAAO,KA2CAC,CAAYzD,EAAGC,GAxCxB,SAAsBD,EAAGC,GACvB,IAAIyD,EAAa,EAMjB,GALmB7D,EAAMO,KAAK,SAACC,EAAGuC,GAEhC,OADAc,EAAad,EACNvC,EAAEL,IAAMA,GAAKK,EAAEJ,IAAMA,IAGd,CACd,IAAM0D,EAA6B,IAAfD,EAChB5H,EAAa+F,EAAU,iBAAmB,eAC9C,IAAK8B,EAAa,CAChB,IAGMhF,EAAOkB,EAAMqB,OAEnBpF,EAAU,oBAAAC,OAAuBuC,EAAW,CAC1CC,EAFQmF,EAGR/E,OACAF,KANW,EAOXM,KATW,GAUXF,KATW,IAIH,KAQZ,OACEnC,EAAAC,EAAAC,cAAAF,EAAAC,EAAA2G,SAAA,KACE5G,EAAAC,EAAAC,cAACoB,EAAD,MACC2F,GAAejH,EAAAC,EAAAC,cAACsB,EAAD,MAChBxB,EAAAC,EAAAC,cAACwB,EAAD,CAAYtC,WAAYA,KAK9B,OAAO,KAQA8H,CAAa5D,EAAGC,wzCCxX3B,IAAM4D,GAAkBvG,YAAHwG,MAMfC,GAAkB7I,IAAOC,IAAV6I,IACjBH,IAOEI,GAAkB/I,IAAOC,IAAV+I,IACjBL,IAKEM,GAAkBjJ,IAAOC,IAAViJ,IACjBP,IAOEQ,GAAkBnJ,IAAOC,IAAVmJ,IACjBT,IAOEU,GAAajH,YAAHkH,KAcVC,GAAYvJ,IAAOC,IAAVuJ,IACXH,IAKEI,GAAWzJ,IAAOC,IAAVyJ,IACVL,IAkCWM,GA7BE,SAAAlJ,GAA2C,IAAxCC,EAAwCD,EAAxCC,WAAYkJ,EAA4BnJ,EAA5BmJ,MAAOvD,EAAqB5F,EAArB4F,SAAUwD,EAAWpJ,EAAXoJ,KAM/C,OACErI,EAAAC,EAAAC,cAACC,EAAD,CAAWC,MANU,CACrBhB,WAAY,QACZkJ,QAAS,KAKPtI,EAAAC,EAAAC,cAACmH,GAAD,aACArH,EAAAC,EAAAC,cAACqH,GAAD,eACAvH,EAAAC,EAAAC,cAACuH,GAAD,aACAzH,EAAAC,EAAAC,cAACyH,GAAD,eACA3H,EAAAC,EAAAC,cAAC6H,GAAD,KACE/H,EAAAC,EAAAC,cAAA,qBACAF,EAAAC,EAAAC,cAAA,YAAOkI,IAETpI,EAAAC,EAAAC,cAAC+H,GAAD,KACEjI,EAAAC,EAAAC,cAAA,oBACAF,EAAAC,EAAAC,cAAA,YAAOmI,IAETrI,EAAAC,EAAAC,cAACqI,EAAD,CAASrJ,WAAYA,EAAY2F,SAAUA,i2BClFjD,IAAM2D,GAAYhK,IAAOC,IAAVgK,MAMTV,GAAYvJ,IAAOC,IAAViK,MAmBTC,GAAmBnK,IAAOC,IAAVmK,MAQhBC,GAAYrK,IAAOsK,KAAVC,MA4DAC,GAlDC,SAAA/J,GAA6C,IAA1CC,EAA0CD,EAA1CC,WAAY+J,EAA8BhK,EAA9BgK,WAAYZ,EAAkBpJ,EAAlBoJ,KAAMD,EAAYnJ,EAAZmJ,MAoB/C,OAdA3I,oBAAU,WACR,SAASC,EAAWC,GACA,MAAdA,EAAEC,SAAiC,KAAdD,EAAEC,QACzBqJ,IACuB,MAAdtJ,EAAEC,SAAiC,KAAdD,EAAEC,SAChCV,IAIJ,OADAW,OAAOC,iBAAiB,WAAYJ,GAC7B,WACLG,OAAOE,oBAAoB,WAAYL,KAExC,IAGDM,EAAAC,EAAAC,cAACC,EAAD,CAAWC,MApBU,CACrBhB,WAAY,QACZ8J,MAAO,UAmBLlJ,EAAAC,EAAAC,cAACG,EAAD,CAAOD,MAAO,CAAEE,UAAW,MAA3B,aACAN,EAAAC,EAAAC,cAACsI,GAAD,CAAWpI,MAAO,CAAEE,UAAW,KAC7BN,EAAAC,EAAAC,cAACiJ,GAAD,KACEnJ,EAAAC,EAAAC,cAAA,qBACAF,EAAAC,EAAAC,cAAA,YAAOkI,IAETpI,EAAAC,EAAAC,cAAA,QAAME,MAAO,CAAEgJ,SAAU,GAAIC,OAAQ,WAArC,KACArJ,EAAAC,EAAAC,cAACiJ,GAAD,KACEnJ,EAAAC,EAAAC,cAAA,oBACAF,EAAAC,EAAAC,cAAA,YAAOmI,KAGXrI,EAAAC,EAAAC,cAACsI,GAAD,KACExI,EAAAC,EAAAC,cAACyI,GAAD,kBAEF3I,EAAAC,EAAAC,cAACsI,GAAD,KACExI,EAAAC,EAAAC,cAAC2I,GAAD,eACA7I,EAAAC,EAAAC,cAAC2I,GAAD,iBCpFFS,GAAO,CACXC,WAAY,aACZC,UAAW,YACXC,SAAU,aAwDGC,GAnDH,WAAM,IAAA5E,EACQC,mBAASuE,GAAKC,YADtBvE,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GACT6E,EADS3E,EAAA,GACH4E,EADG5E,EAAA,GAAA6E,EAEU9E,mBAAS,GAFnB+E,EAAA7E,OAAAC,EAAA,EAAAD,CAAA4E,EAAA,GAETzB,EAFS0B,EAAA,GAEFjF,EAFEiF,EAAA,GAAAC,EAGQhF,mBACtBiF,SAASC,aAAaC,QANN,0BAM8B,IAJhCC,EAAAlF,OAAAC,EAAA,EAAAD,CAAA8E,EAAA,GAGT1B,EAHS8B,EAAA,GAGHC,EAHGD,EAAA,GAWhB,SAASE,IACPxF,EAAS,GACT+E,EAAQN,GAAKE,WAYf,OAlBA/J,oBAAU,WACRwK,aAAaK,QAVG,wBAUkBjC,IACjC,CAACA,IAgBIsB,GACN,KAAKL,GAAKC,WACR,OAAOvJ,EAAAC,EAAAC,cAACqK,EAAD,CAAWrL,WAAYmL,IAChC,KAAKf,GAAKE,UACR,OACExJ,EAAAC,EAAAC,cAACsK,GAAD,CACEtL,WAfR,WACEkL,EAAQrH,KAAKD,IAAIuF,EAAMD,IACvBwB,EAAQN,GAAKG,WAcPpB,KAAMA,EACND,MAAOA,EACPvD,SAAUA,IAGhB,KAAKyE,GAAKG,SACR,OACEzJ,EAAAC,EAAAC,cAACuK,GAAD,CACEvL,WAnBR,WACE0K,EAAQN,GAAKC,aAmBPN,WAAYoB,EACZhC,KAAMA,EACND,MAAOA,IAGb,QACE,OAAO,OCvDbsC,IAASC,OAAO3K,EAAAC,EAAAC,cAAC0K,GAAD,MAASC,SAASC,eAAe","file":"static/js/main.44341542.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/bg-start.410390fd.svg\";","module.exports = __webpack_public_path__ + \"static/media/ic-point.24791f9a.svg\";","import styled from 'styled-components';\n\nconst Container = styled.div`\n  position: absolute;\n  width: 1280px;\n  height: 800px;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background: gray;\n`;\n\nexport default Container;\n","import styled from 'styled-components';\n\nconst Title = styled.h1`\n  text-align: center;\n  font-size: 36px;\n  /* margin-top: 360px; */\n  color: white;\n\n  &::before,\n  &::after {\n    content: '';\n    display: inline-block;\n    width: 40px;\n    height: 40px;\n    background: white;\n  }\n\n  &::before {\n    margin-right: 20px;\n  }\n\n  &::after {\n    margin-left: 20px;\n  }\n`;\n\nexport default Title;\n","import React, { useEffect } from 'react';\nimport styled from 'styled-components';\nimport PropTypes from 'prop-types';\n\nimport Container from '../components/Container';\nimport Title from '../components/Title';\nimport bgSrc from '../assets/bg-start.svg';\n\n// const Title = styled.h1`\n//   text-align: center;\n//   font-size: 36px;\n//   margin-top: 360px;\n//   color: white;\n\n//   &::before,\n//   &::after {\n//     content: '';\n//     display: inline-block;\n//     width: 40px;\n//     height: 40px;\n//     background: white;\n//   }\n\n//   &::before {\n//     margin-right: 20px;\n//   }\n\n//   &::after {\n//     margin-left: 20px;\n//   }\n// `;\n\nconst Content = styled.p`\n  font-size: 24px;\n  text-align: center;\n  color: #00ffe2;\n  margin-top: 40px;\n`;\n\nconst StartPage = ({ toNextPage }) => {\n  const containerStyle = {\n    background: `url(${bgSrc})`,\n    backgroundRepeat: 'no-repeat',\n    backgroundPosition: 'cover'\n  };\n\n  useEffect(() => {\n    function onKeyPress(e) {\n      // space\n      if (e.keyCode === 32) {\n        toNextPage();\n      }\n    }\n\n    window.addEventListener('keypress', onKeyPress);\n    return () => {\n      window.removeEventListener('keypress', onKeyPress);\n    };\n  }, []);\n\n  return (\n    <Container style={containerStyle}>\n      <Title style={{ marginTop: 360 }}>SNAAAAAAKE</Title>\n      <Content>PRESS [SPACE] TO START</Content>\n    </Container>\n  );\n};\n\nStartPage.propTypes = {\n  toNextPage: PropTypes.func.isRequired\n};\n\nexport default StartPage;\n","/**\n【特定技術】需記錄歷史最高分紀錄，吃到一個餌加一分。\n【特定技術】留意貪吃蛇變長時，也會依照蛇的長度提供漸層顏色。餌的座標也需提供十字光亮漸層。\n【特定技術】蛇體可穿牆到對向位置\n【特定技術】留意全程遊戲都必須透過鍵盤來操作。\n */\n\nimport React, { useReducer, useEffect, useState } from 'react';\nimport styled, { css as _css } from 'styled-components';\nimport PropTypes from 'prop-types';\nimport produce from 'immer';\nimport baitImgSrc from '../assets/ic-point.svg';\n\nconst Wrapper = styled.div`\n  width: 1120px;\n  height: 640px;\n  position: relative;\n  border: solid 1px #002a9d;\n  box-sizing: content-box;\n  background: #00035a;\n\n  display: flex;\n  flex-wrap: wrap;\n`;\n\nconst boxStyle = prop => _css`\n  width: calc(1120px / ${prop.colNum});\n  height: calc(100% / ${prop.rowNum});\n`;\n\nconst Box = styled.div`\n  position: relative;\n  border: solid 1px #002a9d;\n  ${boxStyle}\n  margin: 0px;\n  text-align: center;\n`;\n\nconst BaitBackground = styled.div`\n  position: absolute;\n  width: calc(100% + 2px);\n  height: calc(100% + 2px);\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background: rgb(255, 255, 255);\n  opacity: ${prop => prop.opacity || 1};\n  z-index: 10;\n`;\n\nconst BaitImg = styled.img`\n  position: relative;\n  max-width: 100%;\n  max-height: 100%;\n  transform-origin: center center;\n  transform: scale(2);\n  z-index: 20;\n`;\n\nconst SnakeBackground = styled.div`\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  border: none;\n  z-index: 25;\n  background: #00035a;\n`;\n\nconst SnakeHeadShadow = styled.div`\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  border-radius: 100%;\n  top: 0;\n  left: 0;\n  z-index: 24;\n  box-shadow: 0px 9px 13px 9px rgba(255, 255, 255, 0.16),\n    0px -9px 13px 9px rgba(255, 255, 255, 0.16),\n    9px 0px 13px 9px rgba(255, 255, 255, 0.16),\n    -9px 0px 13px 9px rgba(255, 255, 255, 0.16);\n  background: #00035a;\n`;\n\nconst SnakeBlock = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: ${prop => prop.background || 'black'};\n  z-index: 30;\n`;\n\nfunction getOpacity({ d, dMin = 0, dMax = 1, oMin = 0, oMax = 1 }) {\n  return ((d - dMin) * (oMax - oMin)) / (dMax - dMin) + oMin;\n}\n\nconst rowNum = 16;\nconst colNum = 28;\nconst DIRECTION = {\n  TOP: 'd-t',\n  LEFT: 'd-l',\n  RIGHT: 'd-r',\n  BOTTOM: 'd-b',\n  NONE: 'd-n'\n};\n\nconst computeBoxes = (rowNum, colNum) => {\n  const boxes = [];\n  for (let y = 0; y < rowNum; y++) {\n    for (let x = 0; x < colNum; x++) {\n      boxes.push({\n        x,\n        y\n      });\n    }\n  }\n  return boxes;\n};\n\nfunction getRndInteger(min, max) {\n  return Math.floor(Math.random() * (max - min)) + min;\n}\n\nfunction makeBait(snake) {\n  let repeatPoint = snake[0];\n  let bait = { x: 0, y: 0 };\n  const MAX_TIME = 999;\n  let count = 0;\n\n  function findRepeat(bait) {\n    return snake.find(s => s.x === bait.x && s.y === bait.y);\n  }\n\n  while (repeatPoint) {\n    bait = { x: getRndInteger(0, colNum), y: getRndInteger(0, rowNum) };\n    repeatPoint = findRepeat(bait);\n    // console.log('make-' + count, { bait, snake, repeatPoint });\n    count++;\n    if (count >= MAX_TIME) {\n      break;\n    }\n  }\n  return bait;\n}\n\nconst reducer = (state, action) =>\n  produce(state, draft => {\n    switch (action.type) {\n      case 'snake-move':\n        if (draft.direction === DIRECTION.NONE) return;\n\n        const snakeHead = draft.snake[0];\n        let newX, newY;\n        if (draft.direction === DIRECTION.RIGHT) {\n          newX = snakeHead.x + 1;\n          newY = snakeHead.y;\n        } else if (draft.direction === DIRECTION.LEFT) {\n          newX = snakeHead.x - 1;\n          newY = snakeHead.y;\n        } else if (draft.direction === DIRECTION.TOP) {\n          newX = snakeHead.x;\n          newY = snakeHead.y - 1;\n        } else if (draft.direction === DIRECTION.BOTTOM) {\n          newX = snakeHead.x;\n          newY = snakeHead.y + 1;\n        }\n\n        if (newX >= colNum) {\n          newX = 0;\n        } else if (newX < 0) {\n          newX = colNum - 1;\n        }\n        if (newY >= rowNum) {\n          newY = 0;\n        } else if (newY < 0) {\n          newY = rowNum - 1;\n        }\n\n        draft.snake.splice(0, 0, {\n          x: newX,\n          y: newY\n        });\n        if (newX === draft.bait.x && newY === draft.bait.y) {\n          draft.bait = makeBait(draft.snake);\n        } else {\n          draft.snake.pop();\n        }\n        break;\n      case 'change-direction':\n        if (draft.snake.length > 1) {\n          if (\n            draft.direction === DIRECTION.TOP &&\n            action.direction === DIRECTION.BOTTOM\n          ) {\n            return;\n          }\n          if (\n            draft.direction === DIRECTION.BOTTOM &&\n            action.direction === DIRECTION.TOP\n          ) {\n            return;\n          }\n          if (\n            draft.direction === DIRECTION.LEFT &&\n            action.direction === DIRECTION.RIGHT\n          ) {\n            return;\n          }\n          if (\n            draft.direction === DIRECTION.RIGHT &&\n            action.direction === DIRECTION.LEFT\n          ) {\n            return;\n          }\n        }\n        draft.direction = action.direction;\n        break;\n      default:\n    }\n  });\n\nconst initialSnake = [{ x: 3, y: 7 }];\nconst initialBait = makeBait(initialSnake);\n\nconst SandBox = ({ toNextPage, setScore }) => {\n  const [canPlay, setCanPlay] = useState(true);\n  const boxes = React.useMemo(() => computeBoxes(rowNum, colNum), [\n    rowNum,\n    colNum\n  ]);\n\n  const [state, dispatch] = useReducer(reducer, {\n    bait: initialBait,\n    snake: initialSnake,\n    direction: DIRECTION.NONE\n  });\n  const { bait, snake, direction } = state;\n\n  useEffect(() => {\n    let key = null;\n    if (canPlay) {\n      dispatch({\n        type: 'snake-move'\n      });\n      key = setInterval(() => {\n        dispatch({\n          type: 'snake-move'\n        });\n      }, 200);\n    }\n    return () => {\n      clearInterval(key);\n    };\n  }, [direction, canPlay]);\n\n  useEffect(() => {\n    setScore(snake.length - 1);\n  }, [snake.length]);\n\n  useEffect(() => {\n    const sHead = snake[0];\n    const collapsePoint = snake.find(\n      (s, idx) => idx > 0 && (s.x === sHead.x && s.y === sHead.y)\n    );\n    if (collapsePoint) {\n      setCanPlay(false);\n      setTimeout(toNextPage, 1000);\n    }\n  }, [snake]);\n\n  useEffect(() => {\n    function onKeyDown(e) {\n      switch (e.keyCode) {\n        case 38:\n        case 104:\n          dispatch({\n            type: 'change-direction',\n            direction: DIRECTION.TOP\n          });\n          break;\n        case 37:\n        case 100:\n          dispatch({\n            type: 'change-direction',\n            direction: DIRECTION.LEFT\n          });\n          break;\n        case 40:\n        case 98:\n          dispatch({\n            type: 'change-direction',\n            direction: DIRECTION.BOTTOM\n          });\n          break;\n        case 39:\n        case 102:\n          dispatch({\n            type: 'change-direction',\n            direction: DIRECTION.RIGHT\n          });\n          break;\n        default:\n      }\n    }\n    window.addEventListener('keydown', onKeyDown);\n    return () => {\n      window.removeEventListener('keydown', onKeyDown);\n    };\n  }, []);\n\n  function baitContent(x, y) {\n    const xDiffMax = 14;\n    const yDiffMax = 6;\n    const xDiff = Math.abs(bait.x - x);\n    const yDiff = Math.abs(bait.y - y);\n    const sameX = x === bait.x;\n    const sameY = y === bait.y;\n\n    if ((sameX || sameY) && xDiff <= xDiffMax && yDiff <= yDiffMax) {\n      let opacity = 0.3;\n      if (!sameX || !sameY) {\n        const oMax = 0.05;\n        const oMin = 0.15;\n        const dMin = 0;\n        const dMax = sameX ? yDiffMax : xDiffMax;\n        const d = sameX ? yDiff : xDiff;\n        opacity = getOpacity({ oMax, oMin, dMax, dMin, d });\n      }\n      return (\n        <>\n          <BaitBackground opacity={opacity} />\n          {x === bait.x && y === bait.y && <BaitImg src={baitImgSrc} />}\n        </>\n      );\n    }\n\n    return null;\n  }\n\n  function snakeContent(x, y) {\n    let snakeIndex = 0;\n    const snakePoint = snake.find((s, idx) => {\n      snakeIndex = idx;\n      return s.x === x && s.y === y;\n    });\n\n    if (snakePoint) {\n      const isSnakeHead = snakeIndex === 0;\n      let background = canPlay ? 'rgb(0,255,226)' : 'rgb(255,0,0)';\n      if (!isSnakeHead) {\n        const oMax = 0.3;\n        const oMin = 1;\n        const dMin = 1;\n        const dMax = snake.length;\n        const d = snakeIndex;\n        background = `rgba(255,255,255,${getOpacity({\n          d,\n          dMax,\n          dMin,\n          oMax,\n          oMin\n        })})`;\n      }\n      return (\n        <>\n          <SnakeBackground />\n          {isSnakeHead && <SnakeHeadShadow />}\n          <SnakeBlock background={background} />\n        </>\n      );\n    }\n\n    return null;\n  }\n\n  return (\n    <Wrapper>\n      {boxes.map(({ x, y }) => (\n        <Box key={`${x}-${y}`} rowNum={rowNum} colNum={colNum}>\n          {baitContent(x, y)}\n          {snakeContent(x, y)}\n        </Box>\n      ))}\n    </Wrapper>\n  );\n};\n\nSandBox.propTypes = {\n  toNextPage: PropTypes.func.isRequired,\n  setScore: PropTypes.func.isRequired\n};\n\nexport default SandBox;\n","import React from 'react';\nimport styled, { css as _css } from 'styled-components';\nimport PropTypes from 'prop-types';\n\nimport Container from '../components/Container';\nimport SandBox from '../components/SandBox';\n\nconst decorationStyle = _css`\n  font-size: 36px;\n  color: white;\n  position: absolute;\n`;\n\nconst DecorationText1 = styled.div`\n  ${decorationStyle}\n  top: 27px;\n  left: 27px;\n  transform-origin: right top;\n  transform: translateX(-100%) rotate(-90deg);\n`;\n\nconst DecorationText2 = styled.div`\n  ${decorationStyle}\n  top: 27px;\n  left: 64px;\n`;\n\nconst DecorationText3 = styled.div`\n  ${decorationStyle}\n  bottom: 27px;\n  right: 27px;\n  transform-origin: right bottom;\n  transform: translateX(-37px) rotate(90deg);\n`;\n\nconst DecorationText4 = styled.div`\n  ${decorationStyle}\n  bottom: 27px;\n  right: 64px;\n  transform-origin: left bottom;\n  transform: translate(100%, -100%) rotate(180deg);\n`;\n\nconst scoreStyle = _css`\n  position: absolute;\n  color: white;\n  > *:nth-child(1) {\n    font-size: 16px;\n    vertical-align: middle;\n  }\n  > *:nth-child(2) {\n    font-size: 36px;\n    margin-left: 8px;\n    vertical-align: middle;\n  }\n`;\n\nconst ScoreArea = styled.div`\n  ${scoreStyle};\n  right: 80px;\n  top: 27px;\n`;\n\nconst BestArea = styled.div`\n  ${scoreStyle};\n  left: 80px;\n  bottom: 27px;\n`;\n\nconst PlayPage = ({ toNextPage, score, setScore, best }) => {\n  const containerStyle = {\n    background: 'black',\n    padding: 80\n  };\n\n  return (\n    <Container style={containerStyle}>\n      <DecorationText1>SNAA</DecorationText1>\n      <DecorationText2>AAAAKE</DecorationText2>\n      <DecorationText3>SNAA</DecorationText3>\n      <DecorationText4>AAAAKE</DecorationText4>\n      <ScoreArea>\n        <span>score</span>\n        <span>{score}</span>\n      </ScoreArea>\n      <BestArea>\n        <span>best</span>\n        <span>{best}</span>\n      </BestArea>\n      <SandBox toNextPage={toNextPage} setScore={setScore} />\n    </Container>\n  );\n};\n\nPlayPage.propTypes = {\n  toNextPage: PropTypes.func.isRequired\n};\n\nexport default PlayPage;\n","import React, { useEffect } from 'react';\nimport styled from 'styled-components';\nimport PropTypes from 'prop-types';\n\nimport Container from '../components/Container';\nimport Title from '../components/Title';\n\nconst CenterRow = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst ScoreArea = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  width: 160px;\n\n  & > *:nth-child(1) {\n    font-size: 16px;\n    line-height: 17px;\n  }\n\n  & > *:nth-child(2) {\n    font-size: 36px;\n    line-height: 37px;\n    margin-top: 18px;\n  }\n`;\n\nconst InverseColorText = styled.div`\n  font-size: 24px;\n  color: black;\n  background: white;\n  padding: 8px;\n  margin-top: 64px;\n`;\n\nconst CheckText = styled.span`\n  color: #00ffe2;\n  font-size: 24px;\n  margin-top: 40px;\n\n  &:last-child {\n    margin-left: 86px;\n  }\n`;\n\nconst EndPage = ({ toNextPage, toPrevPage, best, score }) => {\n  const containerStyle = {\n    background: 'black',\n    color: 'white'\n  };\n\n  useEffect(() => {\n    function onKeyPress(e) {\n      if (e.keyCode === 121 || e.keyCode === 89) {\n        toPrevPage();\n      } else if (e.keyCode === 110 || e.keyCode === 78) {\n        toNextPage();\n      }\n    }\n    window.addEventListener('keypress', onKeyPress);\n    return () => {\n      window.removeEventListener('keypress', onKeyPress);\n    };\n  }, []);\n\n  return (\n    <Container style={containerStyle}>\n      <Title style={{ marginTop: 253 }}>GAME OVER</Title>\n      <CenterRow style={{ marginTop: 40 }}>\n        <ScoreArea>\n          <span>score</span>\n          <span>{score}</span>\n        </ScoreArea>\n        <span style={{ fontSize: 36, margin: '0 38px' }}>/</span>\n        <ScoreArea>\n          <span>best</span>\n          <span>{best}</span>\n        </ScoreArea>\n      </CenterRow>\n      <CenterRow>\n        <InverseColorText>RESTART?</InverseColorText>\n      </CenterRow>\n      <CenterRow>\n        <CheckText>YES[Y]</CheckText>\n        <CheckText>NO[N]</CheckText>\n      </CenterRow>\n    </Container>\n  );\n};\n\nEndPage.propTypes = {\n  toNextPage: PropTypes.func.isRequired,\n  toPrevPage: PropTypes.func.isRequired\n};\n\nexport default EndPage;\n","import React, { useState, useEffect } from 'react';\nimport StartPage from './pages/StartPage';\nimport PlayPage from './pages/PlayPage';\nimport EndPage from './pages/EndPage';\n\nconst PAGE = {\n  START_PAGE: 'start-page',\n  PLAY_PAGE: 'play-page',\n  END_PAGE: 'end--page'\n};\n\nconst LO_BEST_KEY = 'best_snake_game_score';\n\nconst App = () => {\n  const [page, setPage] = useState(PAGE.START_PAGE);\n  const [score, setScore] = useState(0);\n  const [best, setBest] = useState(\n    parseInt(localStorage.getItem(LO_BEST_KEY) || 0)\n  );\n\n  useEffect(() => {\n    localStorage.setItem(LO_BEST_KEY, best);\n  }, [best]);\n\n  function toPlayPage() {\n    setScore(0);\n    setPage(PAGE.PLAY_PAGE);\n  }\n\n  function toEndPage() {\n    setBest(Math.max(best, score));\n    setPage(PAGE.END_PAGE);\n  }\n\n  function toStartPage() {\n    setPage(PAGE.START_PAGE);\n  }\n\n  switch (page) {\n    case PAGE.START_PAGE:\n      return <StartPage toNextPage={toPlayPage} />;\n    case PAGE.PLAY_PAGE:\n      return (\n        <PlayPage\n          toNextPage={toEndPage}\n          best={best}\n          score={score}\n          setScore={setScore}\n        />\n      );\n    case PAGE.END_PAGE:\n      return (\n        <EndPage\n          toNextPage={toStartPage}\n          toPrevPage={toPlayPage}\n          best={best}\n          score={score}\n        />\n      );\n    default:\n      return null;\n  }\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}